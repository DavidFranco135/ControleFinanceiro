<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>FinanFlow - Controle Financeiro Moderno</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
body { font-family: 'Inter', sans-serif; background:#f8fafc; }
</style>

<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@18.2.0",
    "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
    "recharts": "https://esm.sh/recharts@2.12.0"
  }
}
</script>
</head>

<body>
<div id="root"></div>

<script type="module">
import React, { useState, useEffect, useMemo } from "react";
import { createRoot } from "react-dom/client";
import { BarChart, Bar, XAxis, Tooltip, ResponsiveContainer, Cell } from "recharts";

const TransactionType = { INCOME:"INCOME", EXPENSE:"EXPENSE" };

const Login = ({ onAuth }) => {
  const [email,setEmail]=useState("");
  const [password,setPassword]=useState("");
  return (
    <div className="min-h-screen flex items-center justify-center">
      <form onSubmit={e=>{e.preventDefault();onAuth(email);}} className="bg-white p-8 rounded-xl shadow">
        <input className="border p-2 mb-2 w-full" placeholder="Email" onChange={e=>setEmail(e.target.value)}/>
        <input className="border p-2 mb-4 w-full" placeholder="Senha"/>
        <button className="bg-indigo-600 text-white w-full py-2 rounded">Entrar</button>
      </form>
    </div>
  );
};

const Dashboard = ({ transactions }) => {
  const totals = useMemo(()=>{
    const income = transactions.filter(t=>t.type==="INCOME").reduce((a,b)=>a+b.amount,0);
    const expense = transactions.filter(t=>t.type==="EXPENSE").reduce((a,b)=>a+b.amount,0);
    return {income,expense};
  },[transactions]);

  const data = [
    { name:"Receitas", value:totals.income, color:"#10b981" },
    { name:"Despesas", value:totals.expense, color:"#ef4444" }
  ];

  return (
    <div className="p-8">
      <h1 className="text-2xl font-bold mb-6">Dashboard</h1>
      <div className="h-64 bg-white rounded-xl p-4">
        <ResponsiveContainer>
          <BarChart data={data}>
            <XAxis dataKey="name"/>
            <Tooltip/>
            <Bar dataKey="value">
              {data.map((e,i)=><Cell key={i} fill={e.color}/>)}
            </Bar>
          </BarChart>
        </ResponsiveContainer>
      </div>
    </div>
  );
};

const App = () => {
  const [user,setUser]=useState(null);
  const [transactions]=useState([]);

  if(!user) return <Login onAuth={setUser}/>;
  return <Dashboard transactions={transactions}/>;
};

createRoot(document.getElementById("root")).render(<App/>);
</script>
</body>
</html>
